(function(p,v,u,y,o,g,P){"use strict";function A(){return P.useProxy(o.storage),React.createElement(g.ErrorBoundary,null,React.createElement(u.ReactNative.ScrollView,null,React.createElement(g.Forms.FormSwitchRow,{label:"Hide Server Boosts shortcut",subLabel:"Removes the Server Boosts row above channels",onValueChange:function(e){return o.storage.hideServerBoosts=e},value:o.storage.hideServerBoosts}),React.createElement(g.Forms.FormSwitchRow,{label:"Hide Events shortcut",subLabel:"Also hide the Events row when present",onValueChange:function(e){return o.storage.hideEvents=e},value:o.storage.hideEvents})))}const c=[],w=["title","label","name","text","accessibilityLabel","contentDescription","route","path","url","href","id","key","testID","type"],_=["children","items","sections","data","rows","entries","trailingItems","leadingItems","header","footer"],C=["SERVER_BOOSTS","premium/subscriptions","server-boost","guild-events"],I=["ChannelList","channel list","GuildChannel","/channels/"],T=["onPress","onLongPress","onPressIn"],L=["premium/subscriptions","premium-subscriptions","server-boost","guildboost"],R=["/events","guild-events","guildevents"],f=function(e){return e.replace(/\s+/g," ").trim().toLowerCase()},b=function(e){const t=f(e);if(!t)return!1;const r=typeof u.i18n?.Messages?.SERVER_BOOSTS=="string"?f(u.i18n.Messages.SERVER_BOOSTS):null;return t===r||t.startsWith(`${r??"server boosts"} `)||t==="server boosts"||t.startsWith("server boosts ")||t.includes("premium/subscriptions")||t.includes("server-boost")||t.includes("guildboost")},S=function(e){const t=f(e);return t?[u.i18n?.Messages?.EVENTS,u.i18n?.Messages?.GUILD_EVENTS,u.i18n?.Messages?.GUILD_EVENT_UPSELL_TITLE].filter(function(r){return typeof r=="string"}).map(f).includes(t)||t==="events"||t.startsWith("events ")||t.includes("/events")||t.includes("guild-events"):!1};function a(e,t=[],r=0){if(e==null||r>5)return t;if(typeof e=="string")return t.push(e),t;if(Array.isArray(e)){for(const n of e)a(n,t,r+1);return t}if(typeof e=="object"){for(const n of w){const i=e[n];typeof i=="string"&&t.push(i)}"children"in e&&a(e.children,t,r+1),"props"in e&&a(e.props,t,r+1)}return t}function l(e,t){return a(e).some(function(r){return t(r)})}function d(e,t){for(const r of T){const n=e?.[r];if(typeof n=="function")try{const i=String(n).toLowerCase();if(t.some(function(s){return i.includes(s.toLowerCase())}))return!0}catch{}}return!1}function j(e,t){if(!t||typeof t!="object")return!1;if(typeof t.onPress=="function"||typeof t.onLongPress=="function"||typeof t.onPressIn=="function")return!0;const r=String(typeof e=="string"?e:e?.displayName??e?.name??"").toLowerCase();return r.includes("pressable")||r.includes("touchable")||r.includes("row")||r.includes("cell")}function V(e){const t=[],r=function(n){if(!(!n||typeof n!="object")){for(const i of w){const s=n[i];typeof s=="string"&&t.push(s)}typeof n.children=="string"&&t.push(n.children)}};return r(e),r(e?.props),r(e?.item),t}function O(e){if(!o.storage.hideServerBoosts&&!o.storage.hideEvents||!e||typeof e!="object")return!1;const t=V(e);if(!t.length)return!1;const r=o.storage.hideServerBoosts&&t.some(b),n=o.storage.hideEvents&&t.some(S);return r||n}function h(e,t=new WeakSet){if(e==null)return e;if(Array.isArray(e)){const r=e.map(function(n){return h(n,t)}).filter(function(n){return n!=null});return e.length=0,e.push(...r),e}if(typeof e!="object"||t.has(e))return e;if(t.add(e),O(e))return null;for(const r of _){if(!(r in e))continue;const n=e[r],i=h(n,t);i==null?Array.isArray(n)?e[r]=[]:delete e[r]:e[r]=i}if(e.props&&typeof e.props=="object"&&"children"in e.props){const r=h(e.props.children,t);r==null?delete e.props.children:e.props.children=r}return e}function B(e,t){let r="";try{r=String(e)}catch{return!1}return t.some(function(n){return r.includes(n)})}function x(){const e=new Set,t=v.findAll(function(n){return n&&typeof n=="object"&&typeof n.default=="function"&&B(n.default,C)}),r=t.length?t:v.findAll(function(n){return n&&typeof n=="object"&&typeof n.default=="function"&&B(n.default,I)}).slice(0,40);for(const n of r)if(!e.has(n)){e.add(n);try{c.push(y.after("default",n,function(i,s){return h(s)}))}catch{}}}function M(){u.React?.createElement&&c.push(y.instead("createElement",u.React,function(e,t){const[r,n,...i]=e;if(!n||!j(r,n))return t(...e);const s=i.length?{...n,children:i}:n,E=o.storage.hideServerBoosts&&(l(s,b)||d(n,L)),m=o.storage.hideEvents&&(l(s,S)||d(n,R));return E||m?null:t(...e)}))}function N(){const e=v.findByProps("jsx","jsxs");if(e)for(const t of["jsx","jsxs"])typeof e[t]=="function"&&c.push(y.instead(t,e,function(r,n){const[i,s]=r;if(!s||!j(i,s))return n(...r);const E=o.storage.hideServerBoosts&&(l(s,b)||d(s,L)),m=o.storage.hideEvents&&(l(s,S)||d(s,R));return E||m?null:n(...r)}))}var D={onLoad(){o.storage.hideServerBoosts??=!0,o.storage.hideEvents??=!1,x(),M(),N()},onUnload(){for(;c.length;)try{c.pop()?.()}catch{}},settings:A};return p.default=D,Object.defineProperty(p,"__esModule",{value:!0}),p})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.plugin,vendetta.ui.components,vendetta.storage);
